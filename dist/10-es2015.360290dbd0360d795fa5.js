(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{Yj9t:function(e,t,o){"use strict";o.r(t),o.d(t,"AuthModule",(function(){return y}));var r=o("ofXK"),a=o("tyNb"),n=o("3Pt+"),i=o("YUcS"),c=o("qFsG"),s=o("bTqV"),u=o("kmnG"),b=o("Wp6s"),m=o("eAqi"),l=o("HC5s"),p=o("fXoL"),f=o("z1O9");function d(e,t){if(1&e){const e=p.Ub();p.Tb(0,"form",3),p.bc("ngSubmit",(function(){return p.uc(e),p.fc().signInUp()})),p.Tb(1,"mat-form-field",4),p.Ob(2,"input",5),p.Sb(),p.Tb(3,"mat-form-field",4),p.Ob(4,"input",6),p.Sb(),p.Tb(5,"button",7),p.Fc(6,"Auth "),p.Sb(),p.Sb()}if(2&e){const e=p.fc();p.kc("formGroup",e.form)}}function h(e,t){1&e&&(p.Tb(0,"p"),p.Fc(1,"You are logged in."),p.Sb())}let g=(()=>{class e{constructor(e,t,o,r){this.router=e,this.fb=t,this.authService=o,this.alertsService=r,this.auth=new n.d}ngOnInit(){this.form=this.fb.group({email:["",[n.q.required,n.q.email]],password:["",n.q.required]})}ngAfterViewInit(){m.a.loggedIn()&&this.router.navigate([Object(l.a)(location.href)||"/"]).then(()=>{})}signInUp(){this.authService.signInUp(this.form.value).subscribe(e=>{e.hasOwnProperty("access_token")?(this.authService._login(e),this.router.navigateByUrl(Object(l.a)(location.href)||"/").then(()=>{}).catch(console.error)):this.alertsService.add(`Unexpected: ${JSON.stringify(e)};`)})}}return e.\u0275fac=function(t){return new(t||e)(p.Nb(a.b),p.Nb(n.c),p.Nb(m.a),p.Nb(f.a))},e.\u0275cmp=p.Hb({type:e,selectors:[["app-signinup"]],decls:7,vars:2,consts:[[1,"mat-h1"],["novalidate","",3,"formGroup","ngSubmit",4,"ngIf"],[4,"ngIf"],["novalidate","",3,"formGroup","ngSubmit"],[1,"example-full-width","form-group"],["formControlName","email","id","email","matInput","","name","email","placeholder","Email","type","email"],["formControlName","password","id","password","matInput","","name","password","placeholder","Password","type","password"],["color","accent","mat-raised-button","","type","submit"]],template:function(e,t){1&e&&(p.Tb(0,"mat-card"),p.Tb(1,"mat-card-header"),p.Tb(2,"h1",0),p.Fc(3,"Sign in/up"),p.Sb(),p.Sb(),p.Tb(4,"mat-card-content"),p.Dc(5,d,7,1,"form",1),p.Dc(6,h,2,0,"p",2),p.Sb(),p.Sb()),2&e&&(p.Bb(5),p.kc("ngIf",!t.authService.loggedIn()),p.Bb(1),p.kc("ngIf",t.authService.loggedIn()))},directives:[b.a,b.c,b.b,r.m,n.r,n.m,n.g,u.b,n.b,c.b,n.l,n.e,s.b],styles:[""]}),e})();var S=o("XiUz");function v(e,t){if(1&e){const e=p.Ub();p.Tb(0,"form",3),p.bc("ngSubmit",(function(){return p.uc(e),p.fc().signup()})),p.Tb(1,"mat-form-field",4),p.Ob(2,"input",5),p.Sb(),p.Tb(3,"mat-form-field",4),p.Ob(4,"input",6),p.Sb(),p.Tb(5,"button",7),p.Fc(6,"Register "),p.Sb(),p.Sb()}if(2&e){const e=p.fc();p.kc("formGroup",e.form)}}function w(e,t){1&e&&(p.Tb(0,"p"),p.Fc(1,"You are logged in. "),p.Tb(2,"a",8),p.Fc(3,"Go to dashboard"),p.Sb(),p.Sb())}function I(e,t){if(1&e){const e=p.Ub();p.Tb(0,"form",3),p.bc("ngSubmit",(function(){return p.uc(e),p.fc().login()})),p.Tb(1,"mat-form-field",4),p.Ob(2,"input",5),p.Sb(),p.Tb(3,"mat-form-field",4),p.Ob(4,"input",6),p.Sb(),p.Tb(5,"button",7),p.Fc(6,"Sign in "),p.Sb(),p.Sb()}if(2&e){const e=p.fc();p.kc("formGroup",e.form)}}function T(e,t){1&e&&(p.Tb(0,"p"),p.Fc(1,"You are logged in. "),p.Tb(2,"a",8),p.Fc(3,"Go to dashboard"),p.Sb(),p.Sb())}const k=[{path:"",component:g},{path:"signup",component:(()=>{class e{constructor(e,t,o,r){this.router=e,this.fb=t,this.authService=o,this.alertsService=r,this.auth=new n.d}ngOnInit(){this.form=this.fb.group({email:["",[n.q.required,n.q.email]],password:["",n.q.required]})}signup(){this.authService.register(this.form.value).subscribe(e=>{e.headers.has("x-access-token")?(this.authService.accessToken=e.headers.get("x-access-token"),localStorage.setItem("access-token",this.authService.accessToken),this.router.navigate(["/"]).then(()=>{})):this.alertsService.add("No access token in response")})}}return e.\u0275fac=function(t){return new(t||e)(p.Nb(a.b),p.Nb(n.c),p.Nb(m.a),p.Nb(f.a))},e.\u0275cmp=p.Hb({type:e,selectors:[["app-signup"]],decls:7,vars:2,consts:[[1,"mat-h1"],["fxLayout","column","novalidate","",3,"formGroup","ngSubmit",4,"ngIf"],[4,"ngIf"],["fxLayout","column","novalidate","",3,"formGroup","ngSubmit"],[1,"example-full-width","form-group"],["formControlName","email","id","email","matInput","","name","email","placeholder","Email","type","email"],["formControlName","password","id","password","matInput","","name","password","placeholder","Password","type","password"],["color","accent","mat-raised-button","","type","submit"],["routerLink","/"]],template:function(e,t){1&e&&(p.Tb(0,"mat-card"),p.Tb(1,"mat-card-header"),p.Tb(2,"h1",0),p.Fc(3,"Signup"),p.Sb(),p.Sb(),p.Tb(4,"mat-card-content"),p.Dc(5,v,7,1,"form",1),p.Dc(6,w,4,0,"p",2),p.Sb(),p.Sb()),2&e&&(p.Bb(5),p.kc("ngIf",!t.authService.loggedIn()),p.Bb(1),p.kc("ngIf",t.authService.loggedIn()))},directives:[b.a,b.c,b.b,r.m,n.r,n.m,S.c,n.g,u.b,n.b,c.b,n.l,n.e,s.b,a.e],styles:[""]}),e})()},{path:"login",component:(()=>{class e{constructor(e,t,o,r){this.router=e,this.fb=t,this.authService=o,this.alertsService=r,this.auth=new n.d}ngOnInit(){this.form=this.fb.group({email:["",[n.q.required,n.q.email]],password:["",n.q.required]})}login(){this.authService.login(this.form.value).subscribe(e=>{null!=e.access_token?(this.authService.accessToken=e.access_token,localStorage.setItem("access-token",this.authService.accessToken),this.router.navigate(["/"]).then(()=>{})):this.alertsService.add("No access token; try logging in again")})}}return e.\u0275fac=function(t){return new(t||e)(p.Nb(a.b),p.Nb(n.c),p.Nb(m.a),p.Nb(f.a))},e.\u0275cmp=p.Hb({type:e,selectors:[["app-login"]],decls:7,vars:2,consts:[[1,"mat-h1"],["novalidate","",3,"formGroup","ngSubmit",4,"ngIf"],[4,"ngIf"],["novalidate","",3,"formGroup","ngSubmit"],[1,"example-full-width","form-group"],["formControlName","email","id","email","matInput","","name","email","placeholder","Email","type","email"],["formControlName","password","id","password","matInput","","name","password","placeholder","Password","type","password"],["color","accent","mat-raised-button","","type","submit"],["routerLink","/"]],template:function(e,t){1&e&&(p.Tb(0,"mat-card"),p.Tb(1,"mat-card-header"),p.Tb(2,"h1",0),p.Fc(3,"Login"),p.Sb(),p.Sb(),p.Tb(4,"mat-card-content"),p.Dc(5,I,7,1,"form",1),p.Dc(6,T,4,0,"p",2),p.Sb(),p.Sb()),2&e&&(p.Bb(5),p.kc("ngIf",!t.authService.loggedIn()),p.Bb(1),p.kc("ngIf",t.authService.loggedIn()))},directives:[b.a,b.c,b.b,r.m,n.r,n.m,n.g,u.b,n.b,c.b,n.l,n.e,s.b,a.e],styles:[""]}),e})()},{path:"logout",component:(()=>{class e{constructor(e){this.authService=e}ngOnInit(){this.authService.logout()}}return e.\u0275fac=function(t){return new(t||e)(p.Nb(m.a))},e.\u0275cmp=p.Hb({type:e,selectors:[["app-logout"]],decls:0,vars:0,template:function(e,t){},encapsulation:2}),e})()}];let y=(()=>{class e{}return e.\u0275mod=p.Lb({type:e}),e.\u0275inj=p.Kb({factory:function(t){return new(t||e)},providers:[m.a],imports:[[r.c,a.f,a.f.forChild(k),n.h,n.o,i.a,c.c,b.d,u.d,s.c]]}),e})()}}]);