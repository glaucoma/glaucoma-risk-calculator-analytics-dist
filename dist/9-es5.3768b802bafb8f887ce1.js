!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,a,r){return a&&t(e.prototype,a),r&&t(e,r),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{jkDv:function(t,r,n){"use strict";n.r(r),n.d(r,"AdminModule",(function(){return V}));var c,i=n("ofXK"),o=n("tyNb"),s=n("3Pt+"),u=n("f6nW"),l=n("bTqV"),b=n("qFsG"),d=n("d3UM"),f=n("0IaG"),m=n("/t3+"),p=n("+0xr"),h=n("kmnG"),S=n("NFeN"),k=n("lJxs"),v=function(e){return Object.assign(e,{createdAt:new Date(e.createdAt),updatedAt:new Date(e.updatedAt)})},y=n("fXoL"),g=n("tk/3"),C=((c=function(){function t(a){e(this,t),this.http=a}return a(t,[{key:"create",value:function(e){return this.http.post("/api/user",e).pipe(Object(k.a)(v))}},{key:"read",value:function(e){return this.http.get("/api/user"+(null==e?"":"/"+e)).pipe(Object(k.a)(v))}},{key:"update",value:function(e,t){return this.http.put("/api/user"+(null==t?"":"/"+t),e).pipe(Object(k.a)(v))}},{key:"destroy",value:function(e){return this.http.delete("/api/user/"+e)}},{key:"getAll",value:function(){return this.http.get("/api/users").pipe(Object(k.a)((function(e){return e.users.sort((function(e,t){return e.email.localeCompare(t.email)}))})),Object(k.a)((function(e){return e.map(v)})))}}]),t}()).\u0275fac=function(e){return new(e||c)(y.Xb(g.b))},c.\u0275prov=y.Jb({token:c,factory:c.\u0275fac}),c),w=n("z1O9"),D=n("FKr1"),T=["class","user-crud"];function O(e,t){1&e&&(y.Tb(0,"mat-form-field"),y.Ob(1,"input",6),y.Sb())}function E(e,t){if(1&e&&(y.Tb(0,"h3",7),y.Ec(1),y.Sb()),2&e){var a=y.fc();y.Bb(1),y.Fc(a.data.email)}}function B(e,t){1&e&&(y.Tb(0,"mat-form-field"),y.Ob(1,"input",8),y.Sb())}function I(e,t){if(1&e&&(y.Tb(0,"mat-option",9),y.Ec(1),y.Sb()),2&e){var a=t.$implicit;y.kc("value",a),y.Bb(1),y.Gc(" ",a," ")}}function R(e,t){if(1&e&&(y.Tb(0,"button",10),y.Tb(1,"mat-icon"),y.Ec(2,"add_to_queue"),y.Sb(),y.Ec(3," Create "),y.Sb()),2&e){var a=y.fc();y.kc("disabled",a.form.invalid)}}function j(e,t){if(1&e){var a=y.Ub();y.Rb(0),y.Tb(1,"button",10),y.Tb(2,"mat-icon"),y.Ec(3,"update"),y.Sb(),y.Ec(4," Update "),y.Sb(),y.Tb(5,"button",11),y.bc("click",(function(){return y.tc(a),y.fc().destroy=!0})),y.Tb(6,"mat-icon"),y.Ec(7,"delete"),y.Sb(),y.Ec(8," Delete "),y.Sb(),y.Qb()}if(2&e){var r=y.fc();y.Bb(1),y.kc("disabled",r.form.invalid)}}var A,q=((A=function(){function t(a,r){e(this,t),this.dialogRef=a,this.data=r,this.roles=t.roles,this.form=new s.f({email:new s.d("",s.q.required),password:new s.d("",s.q.minLength(3)),roles:new s.d("",s.q.required)}),this.defaultRoles=t.roles.slice(0,2),this.destroy=!1}return a(t,[{key:"ngOnInit",value:function(){null===this.data?this.form.patchValue({roles:this.defaultRoles}):(this.form.patchValue(this.data),this.form.controls.password.clearValidators(),this.form.controls.password.disable())}},{key:"closeDialog",value:function(){this.dialogRef.close(this.destroy?this.destroy:this.form.value)}}]),t}()).roles=["registered","login","admin"],A.\u0275fac=function(e){return new(e||A)(y.Nb(f.d),y.Nb(f.a,8))},A.\u0275cmp=y.Hb({type:A,selectors:[["app-admin",8,"user-crud"]],attrs:T,decls:9,vars:7,consts:[[3,"formGroup","ngSubmit"],[4,"ngIf"],["class","mat-h3",4,"ngIf"],["formControlName","roles","matInput","","multiple","","placeholder","Role"],[3,"value",4,"ngFor","ngForOf"],["class","btn","mat-raised-button","","type","submit",3,"disabled",4,"ngIf"],["formControlName","email","matInput","","placeholder","Email","required","","type","email"],[1,"mat-h3"],["formControlName","password","matInput","","placeholder","Password","required","","type","password"],[3,"value"],["mat-raised-button","","type","submit",1,"btn",3,"disabled"],["mat-raised-button","","type","submit",1,"btn",3,"click"]],template:function(e,t){1&e&&(y.Tb(0,"form",0),y.bc("ngSubmit",(function(){return t.closeDialog()})),y.Cc(1,O,2,0,"mat-form-field",1),y.Cc(2,E,2,1,"h3",2),y.Cc(3,B,2,0,"mat-form-field",1),y.Tb(4,"mat-form-field"),y.Tb(5,"mat-select",3),y.Cc(6,I,2,2,"mat-option",4),y.Sb(),y.Sb(),y.Cc(7,R,4,1,"button",5),y.Cc(8,j,9,1,"ng-container",1),y.Sb()),2&e&&(y.kc("formGroup",t.form),y.Bb(1),y.kc("ngIf",!t.data||!t.data.email),y.Bb(1),y.kc("ngIf",t.data&&t.data.email),y.Bb(1),y.kc("ngIf",t.form.controls.password.enabled),y.Bb(3),y.kc("ngForOf",t.roles),y.Bb(1),y.kc("ngIf",!t.data),y.Bb(1),y.kc("ngIf",t.data))},directives:[s.r,s.m,s.g,i.m,h.b,d.a,s.l,s.e,i.l,s.b,b.b,s.p,D.m,l.b,S.a],styles:["mat-form-field[_ngcontent-%COMP%]{display:block}"]}),A);function F(e,t){1&e&&(y.Tb(0,"mat-header-cell"),y.Ec(1," Email"),y.Sb())}function N(e,t){if(1&e&&(y.Tb(0,"mat-cell"),y.Tb(1,"mat-icon"),y.Ec(2,"border_color"),y.Sb(),y.Ec(3),y.Sb()),2&e){var a=t.$implicit;y.Bb(3),y.Gc(" ",a.email," ")}}function G(e,t){1&e&&(y.Tb(0,"mat-header-cell"),y.Ec(1," Roles"),y.Sb())}function _(e,t){if(1&e&&(y.Tb(0,"mat-cell"),y.Ec(1),y.Sb()),2&e){var a=t.$implicit;y.Bb(1),y.Gc(" ",a.roles,"")}}function U(e,t){1&e&&(y.Tb(0,"mat-header-cell"),y.Ec(1," createdAt"),y.Sb())}function x(e,t){if(1&e&&(y.Tb(0,"mat-cell"),y.Ec(1),y.Sb()),2&e){var a=t.$implicit;y.Bb(1),y.Gc(" ",a.createdAt,"")}}function H(e,t){1&e&&y.Ob(0,"mat-header-row")}function P(e,t){if(1&e){var a=y.Ub();y.Tb(0,"mat-row",15),y.bc("click",(function(){y.tc(a);var e=t.$implicit;return y.fc().selected(e)})),y.Sb()}}var $,J,L,M=(($=function(){function t(a,r){e(this,t),this.dialog=a,this.userService=r,this.displayedColumns=["email","roles","createdAt"]}return a(t,[{key:"ngOnInit",value:function(){var e=this;this.userService.getAll().subscribe((function(t){return e.usersDataSource=new p.k(t.sort())}))}},{key:"applyFilter",value:function(e){this.usersDataSource.filter=e.trim().toLowerCase()}},{key:"openUserCrud",value:function(e){var t=this;this.dialog.open(q,{data:e}).afterClosed().subscribe((function(a){switch(typeof a){case"boolean":case"string":case"number":e&&t.userService.destroy(e.email).subscribe((function(){t.usersDataSource.data.splice(t.usersDataSource.data.indexOf(e),1),t.usersDataSource._updateChangeSubscription()}));break;case"object":e?t.userService.update(a).subscribe((function(r){t.usersDataSource.data.splice(t.usersDataSource.data.indexOf(e),1),t.usersDataSource.data.push(Object.assign(e,a)),t.usersDataSource.data.sort((function(e,t){return e.email.localeCompare(t.email)})),t.usersDataSource._updateChangeSubscription()})):t.userService.create(a).subscribe((function(e){t.usersDataSource.data.push(e),t.usersDataSource.data.sort((function(e,t){return e.email.localeCompare(t.email)})),t.usersDataSource._updateChangeSubscription()}))}}))}},{key:"selected",value:function(e){this.openUserCrud(e)}}]),t}()).\u0275fac=function(e){return new(e||$)(y.Nb(f.b),y.Nb(C))},$.\u0275cmp=y.Hb({type:$,selectors:[["app-users-admin"]],decls:23,vars:3,consts:[["color","secondary"],[1,"mat-h1"],[1,"example-fill-remaining-space"],["mat-icon-button","",3,"click"],["floatPlaceholder","never"],["matInput","","placeholder","Filter",3,"keyup"],[3,"dataSource"],["table",""],["matColumnDef","email"],[4,"cdkHeaderCellDef"],[4,"cdkCellDef"],["matColumnDef","roles"],["matColumnDef","createdAt"],[4,"cdkHeaderRowDef"],[3,"click",4,"cdkRowDef","cdkRowDefColumns"],[3,"click"]],template:function(e,t){1&e&&(y.Tb(0,"mat-toolbar",0),y.Tb(1,"h1",1),y.Ec(2,"Users"),y.Sb(),y.Ob(3,"span",2),y.Tb(4,"button",3),y.bc("click",(function(){return t.openUserCrud()})),y.Tb(5,"mat-icon"),y.Ec(6,"add_circle"),y.Sb(),y.Sb(),y.Ob(7,"span",2),y.Tb(8,"mat-form-field",4),y.Tb(9,"input",5),y.bc("keyup",(function(e){return t.applyFilter(e.target.value)})),y.Sb(),y.Sb(),y.Sb(),y.Tb(10,"mat-table",6,7),y.Rb(12,8),y.Cc(13,F,2,0,"mat-header-cell",9),y.Cc(14,N,4,1,"mat-cell",10),y.Qb(),y.Rb(15,11),y.Cc(16,G,2,0,"mat-header-cell",9),y.Cc(17,_,2,1,"mat-cell",10),y.Qb(),y.Rb(18,12),y.Cc(19,U,2,0,"mat-header-cell",9),y.Cc(20,x,2,1,"mat-cell",10),y.Qb(),y.Cc(21,H,1,0,"mat-header-row",13),y.Cc(22,P,1,0,"mat-row",14),y.Sb()),2&e&&(y.Bb(10),y.kc("dataSource",t.usersDataSource),y.Bb(11),y.kc("cdkHeaderRowDef",t.displayedColumns),y.Bb(1),y.kc("cdkRowDefColumns",t.displayedColumns))},directives:[m.a,l.b,S.a,h.b,b.b,p.j,p.c,u.k,u.c,u.m,u.p,p.d,p.a,p.f,p.h],styles:[".example-fill-remaining-space[_ngcontent-%COMP%]{flex:1 1 auto}"]}),$),Q=[{path:"",component:(J=function t(){e(this,t)},J.\u0275fac=function(e){return new(e||J)},J.\u0275cmp=y.Hb({type:J,selectors:[["app-admin"]],decls:1,vars:0,template:function(e,t){1&e&&y.Ob(0,"app-users-admin")},directives:[M],styles:[""]}),J)}],V=((L=function t(){e(this,t)}).\u0275mod=y.Lb({type:L}),L.\u0275inj=y.Kb({factory:function(e){return new(e||L)},providers:[w.a,C],imports:[[i.c,s.h,s.o,o.f,o.f.forChild(Q),u.r,l.c,f.c,h.d,S.b,b.c,d.b,p.l,m.b]]}),L)}}])}();