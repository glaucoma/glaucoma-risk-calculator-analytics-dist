(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{jkDv:function(e,t,a){"use strict";a.r(t),a.d(t,"AdminModule",(function(){return H}));var c=a("ofXK"),r=a("tyNb"),s=a("3Pt+"),o=a("f6nW"),i=a("bTqV"),n=a("qFsG"),l=a("d3UM"),u=a("0IaG"),b=a("/t3+"),d=a("+0xr"),m=a("kmnG"),p=a("NFeN"),f=a("lJxs");const h=e=>Object.assign(e,{createdAt:new Date(e.createdAt),updatedAt:new Date(e.updatedAt)});var S=a("fXoL"),C=a("tk/3");let g=(()=>{class e{constructor(e){this.http=e}create(e){return this.http.post("/api/user",e).pipe(Object(f.a)(h))}read(e){return this.http.get("/api/user"+(null==e?"":"/"+e)).pipe(Object(f.a)(h))}update(e,t){return this.http.put("/api/user"+(null==t?"":"/"+t),e).pipe(Object(f.a)(h))}destroy(e){return this.http.delete("/api/user/"+e)}getAll(){return this.http.get("/api/users").pipe(Object(f.a)(e=>e.users.sort((e,t)=>e.email.localeCompare(t.email))),Object(f.a)(e=>e.map(h)))}}return e.\u0275fac=function(t){return new(t||e)(S.Xb(C.b))},e.\u0275prov=S.Jb({token:e,factory:e.\u0275fac}),e})();var k=a("z1O9"),w=a("FKr1");const y=["class","user-crud"];function D(e,t){1&e&&(S.Tb(0,"mat-form-field"),S.Ob(1,"input",6),S.Sb())}function T(e,t){if(1&e&&(S.Tb(0,"h3",7),S.Ec(1),S.Sb()),2&e){const e=S.fc();S.Bb(1),S.Fc(e.data.email)}}function v(e,t){1&e&&(S.Tb(0,"mat-form-field"),S.Ob(1,"input",8),S.Sb())}function O(e,t){if(1&e&&(S.Tb(0,"mat-option",9),S.Ec(1),S.Sb()),2&e){const e=t.$implicit;S.kc("value",e),S.Bb(1),S.Gc(" ",e," ")}}function E(e,t){if(1&e&&(S.Tb(0,"button",10),S.Tb(1,"mat-icon"),S.Ec(2,"add_to_queue"),S.Sb(),S.Ec(3," Create "),S.Sb()),2&e){const e=S.fc();S.kc("disabled",e.form.invalid)}}function B(e,t){if(1&e){const e=S.Ub();S.Rb(0),S.Tb(1,"button",10),S.Tb(2,"mat-icon"),S.Ec(3,"update"),S.Sb(),S.Ec(4," Update "),S.Sb(),S.Tb(5,"button",11),S.bc("click",(function(){return S.tc(e),S.fc().destroy=!0})),S.Tb(6,"mat-icon"),S.Ec(7,"delete"),S.Sb(),S.Ec(8," Delete "),S.Sb(),S.Qb()}if(2&e){const e=S.fc();S.Bb(1),S.kc("disabled",e.form.invalid)}}let I=(()=>{class e{constructor(t,a){this.dialogRef=t,this.data=a,this.roles=e.roles,this.form=new s.f({email:new s.d("",s.q.required),password:new s.d("",s.q.minLength(3)),roles:new s.d("",s.q.required)}),this.defaultRoles=e.roles.slice(0,2),this.destroy=!1}ngOnInit(){null===this.data?this.form.patchValue({roles:this.defaultRoles}):(this.form.patchValue(this.data),this.form.controls.password.clearValidators(),this.form.controls.password.disable())}closeDialog(){this.dialogRef.close(this.destroy?this.destroy:this.form.value)}}return e.roles=["registered","login","admin"],e.\u0275fac=function(t){return new(t||e)(S.Nb(u.d),S.Nb(u.a,8))},e.\u0275cmp=S.Hb({type:e,selectors:[["app-admin",8,"user-crud"]],attrs:y,decls:9,vars:7,consts:[[3,"formGroup","ngSubmit"],[4,"ngIf"],["class","mat-h3",4,"ngIf"],["formControlName","roles","matInput","","multiple","","placeholder","Role"],[3,"value",4,"ngFor","ngForOf"],["class","btn","mat-raised-button","","type","submit",3,"disabled",4,"ngIf"],["formControlName","email","matInput","","placeholder","Email","required","","type","email"],[1,"mat-h3"],["formControlName","password","matInput","","placeholder","Password","required","","type","password"],[3,"value"],["mat-raised-button","","type","submit",1,"btn",3,"disabled"],["mat-raised-button","","type","submit",1,"btn",3,"click"]],template:function(e,t){1&e&&(S.Tb(0,"form",0),S.bc("ngSubmit",(function(){return t.closeDialog()})),S.Cc(1,D,2,0,"mat-form-field",1),S.Cc(2,T,2,1,"h3",2),S.Cc(3,v,2,0,"mat-form-field",1),S.Tb(4,"mat-form-field"),S.Tb(5,"mat-select",3),S.Cc(6,O,2,2,"mat-option",4),S.Sb(),S.Sb(),S.Cc(7,E,4,1,"button",5),S.Cc(8,B,9,1,"ng-container",1),S.Sb()),2&e&&(S.kc("formGroup",t.form),S.Bb(1),S.kc("ngIf",!t.data||!t.data.email),S.Bb(1),S.kc("ngIf",t.data&&t.data.email),S.Bb(1),S.kc("ngIf",t.form.controls.password.enabled),S.Bb(3),S.kc("ngForOf",t.roles),S.Bb(1),S.kc("ngIf",!t.data),S.Bb(1),S.kc("ngIf",t.data))},directives:[s.r,s.m,s.g,c.m,m.b,l.a,s.l,s.e,c.l,s.b,n.b,s.p,w.m,i.b,p.a],styles:["mat-form-field[_ngcontent-%COMP%]{display:block}"]}),e})();function R(e,t){1&e&&(S.Tb(0,"mat-header-cell"),S.Ec(1," Email"),S.Sb())}function j(e,t){if(1&e&&(S.Tb(0,"mat-cell"),S.Tb(1,"mat-icon"),S.Ec(2,"border_color"),S.Sb(),S.Ec(3),S.Sb()),2&e){const e=t.$implicit;S.Bb(3),S.Gc(" ",e.email," ")}}function A(e,t){1&e&&(S.Tb(0,"mat-header-cell"),S.Ec(1," Roles"),S.Sb())}function q(e,t){if(1&e&&(S.Tb(0,"mat-cell"),S.Ec(1),S.Sb()),2&e){const e=t.$implicit;S.Bb(1),S.Gc(" ",e.roles,"")}}function F(e,t){1&e&&(S.Tb(0,"mat-header-cell"),S.Ec(1," createdAt"),S.Sb())}function N(e,t){if(1&e&&(S.Tb(0,"mat-cell"),S.Ec(1),S.Sb()),2&e){const e=t.$implicit;S.Bb(1),S.Gc(" ",e.createdAt,"")}}function G(e,t){1&e&&S.Ob(0,"mat-header-row")}function _(e,t){if(1&e){const e=S.Ub();S.Tb(0,"mat-row",15),S.bc("click",(function(){S.tc(e);const a=t.$implicit;return S.fc().selected(a)})),S.Sb()}}let U=(()=>{class e{constructor(e,t){this.dialog=e,this.userService=t,this.displayedColumns=["email","roles","createdAt"]}ngOnInit(){this.userService.getAll().subscribe(e=>this.usersDataSource=new d.k(e.sort()))}applyFilter(e){this.usersDataSource.filter=e.trim().toLowerCase()}openUserCrud(e){this.dialog.open(I,{data:e}).afterClosed().subscribe(t=>{switch(typeof t){case"boolean":case"string":case"number":e&&this.userService.destroy(e.email).subscribe(()=>{this.usersDataSource.data.splice(this.usersDataSource.data.indexOf(e),1),this.usersDataSource._updateChangeSubscription()});break;case"object":e?this.userService.update(t).subscribe(a=>{this.usersDataSource.data.splice(this.usersDataSource.data.indexOf(e),1),this.usersDataSource.data.push(Object.assign(e,t)),this.usersDataSource.data.sort((e,t)=>e.email.localeCompare(t.email)),this.usersDataSource._updateChangeSubscription()}):this.userService.create(t).subscribe(e=>{this.usersDataSource.data.push(e),this.usersDataSource.data.sort((e,t)=>e.email.localeCompare(t.email)),this.usersDataSource._updateChangeSubscription()})}})}selected(e){this.openUserCrud(e)}}return e.\u0275fac=function(t){return new(t||e)(S.Nb(u.b),S.Nb(g))},e.\u0275cmp=S.Hb({type:e,selectors:[["app-users-admin"]],decls:23,vars:3,consts:[["color","secondary"],[1,"mat-h1"],[1,"example-fill-remaining-space"],["mat-icon-button","",3,"click"],["floatPlaceholder","never"],["matInput","","placeholder","Filter",3,"keyup"],[3,"dataSource"],["table",""],["matColumnDef","email"],[4,"cdkHeaderCellDef"],[4,"cdkCellDef"],["matColumnDef","roles"],["matColumnDef","createdAt"],[4,"cdkHeaderRowDef"],[3,"click",4,"cdkRowDef","cdkRowDefColumns"],[3,"click"]],template:function(e,t){1&e&&(S.Tb(0,"mat-toolbar",0),S.Tb(1,"h1",1),S.Ec(2,"Users"),S.Sb(),S.Ob(3,"span",2),S.Tb(4,"button",3),S.bc("click",(function(){return t.openUserCrud()})),S.Tb(5,"mat-icon"),S.Ec(6,"add_circle"),S.Sb(),S.Sb(),S.Ob(7,"span",2),S.Tb(8,"mat-form-field",4),S.Tb(9,"input",5),S.bc("keyup",(function(e){return t.applyFilter(e.target.value)})),S.Sb(),S.Sb(),S.Sb(),S.Tb(10,"mat-table",6,7),S.Rb(12,8),S.Cc(13,R,2,0,"mat-header-cell",9),S.Cc(14,j,4,1,"mat-cell",10),S.Qb(),S.Rb(15,11),S.Cc(16,A,2,0,"mat-header-cell",9),S.Cc(17,q,2,1,"mat-cell",10),S.Qb(),S.Rb(18,12),S.Cc(19,F,2,0,"mat-header-cell",9),S.Cc(20,N,2,1,"mat-cell",10),S.Qb(),S.Cc(21,G,1,0,"mat-header-row",13),S.Cc(22,_,1,0,"mat-row",14),S.Sb()),2&e&&(S.Bb(10),S.kc("dataSource",t.usersDataSource),S.Bb(11),S.kc("cdkHeaderRowDef",t.displayedColumns),S.Bb(1),S.kc("cdkRowDefColumns",t.displayedColumns))},directives:[b.a,i.b,p.a,m.b,n.b,d.j,d.c,o.k,o.c,o.m,o.p,d.d,d.a,d.f,d.h],styles:[".example-fill-remaining-space[_ngcontent-%COMP%]{flex:1 1 auto}"]}),e})();const x=[{path:"",component:(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=S.Hb({type:e,selectors:[["app-admin"]],decls:1,vars:0,template:function(e,t){1&e&&S.Ob(0,"app-users-admin")},directives:[U],styles:[""]}),e})()}];let H=(()=>{class e{}return e.\u0275mod=S.Lb({type:e}),e.\u0275inj=S.Kb({factory:function(t){return new(t||e)},providers:[k.a,g],imports:[[c.c,s.h,s.o,r.f,r.f.forChild(x),o.r,i.c,u.c,m.d,p.b,n.c,l.b,d.l,b.b]]}),e})()}}]);