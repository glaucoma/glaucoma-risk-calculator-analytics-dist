(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{Yj9t:function(t,e,o){"use strict";o.r(e),o.d(e,"AuthModule",(function(){return y}));var r=o("ofXK"),a=o("tyNb"),n=o("3Pt+"),i=o("YUcS"),c=o("qFsG"),s=o("bTqV"),u=o("kmnG"),b=o("Wp6s"),m=o("eAqi"),l=o("HC5s"),p=o("fXoL"),f=o("z1O9");function d(t,e){if(1&t){const t=p.Ub();p.Tb(0,"form",3),p.bc("ngSubmit",(function(){return p.tc(t),p.fc().signInUp()})),p.Tb(1,"mat-form-field",4),p.Ob(2,"input",5),p.Sb(),p.Tb(3,"mat-form-field",4),p.Ob(4,"input",6),p.Sb(),p.Tb(5,"button",7),p.Ec(6,"Auth "),p.Sb(),p.Sb()}if(2&t){const t=p.fc();p.kc("formGroup",t.form)}}function h(t,e){1&t&&(p.Tb(0,"p"),p.Ec(1,"You are logged in."),p.Sb())}let g=(()=>{class t{constructor(t,e,o,r){this.router=t,this.fb=e,this.authService=o,this.alertsService=r,this.auth=new n.d}ngOnInit(){this.form=this.fb.group({email:["",[n.q.required,n.q.email]],password:["",n.q.required]})}ngAfterViewInit(){m.a.loggedIn()&&this.router.navigate([Object(l.a)(location.href)||"/"]).then(()=>{})}signInUp(){this.authService.signInUp(this.form.value).subscribe(t=>{t.hasOwnProperty("access_token")?(this.authService._login(t),this.router.navigateByUrl(Object(l.a)(location.href)||"/").then(()=>{}).catch(console.error)):this.alertsService.add(`Unexpected: ${JSON.stringify(t)};`)})}}return t.\u0275fac=function(e){return new(e||t)(p.Nb(a.b),p.Nb(n.c),p.Nb(m.a),p.Nb(f.a))},t.\u0275cmp=p.Hb({type:t,selectors:[["app-signinup"]],decls:7,vars:2,consts:[[1,"mat-h1"],["novalidate","",3,"formGroup","ngSubmit",4,"ngIf"],[4,"ngIf"],["novalidate","",3,"formGroup","ngSubmit"],[1,"example-full-width","form-group"],["formControlName","email","id","email","matInput","","name","email","placeholder","Email","type","email"],["formControlName","password","id","password","matInput","","name","password","placeholder","Password","type","password"],["color","accent","mat-raised-button","","type","submit"]],template:function(t,e){1&t&&(p.Tb(0,"mat-card"),p.Tb(1,"mat-card-header"),p.Tb(2,"h1",0),p.Ec(3,"Sign in/up"),p.Sb(),p.Sb(),p.Tb(4,"mat-card-content"),p.Cc(5,d,7,1,"form",1),p.Cc(6,h,2,0,"p",2),p.Sb(),p.Sb()),2&t&&(p.Bb(5),p.kc("ngIf",!e.authService.loggedIn()),p.Bb(1),p.kc("ngIf",e.authService.loggedIn()))},directives:[b.a,b.c,b.b,r.m,n.r,n.m,n.g,u.b,n.b,c.b,n.l,n.e,s.b],styles:[""]}),t})();var S=o("XiUz");function v(t,e){if(1&t){const t=p.Ub();p.Tb(0,"form",3),p.bc("ngSubmit",(function(){return p.tc(t),p.fc().signup()})),p.Tb(1,"mat-form-field",4),p.Ob(2,"input",5),p.Sb(),p.Tb(3,"mat-form-field",4),p.Ob(4,"input",6),p.Sb(),p.Tb(5,"button",7),p.Ec(6,"Register "),p.Sb(),p.Sb()}if(2&t){const t=p.fc();p.kc("formGroup",t.form)}}function w(t,e){1&t&&(p.Tb(0,"p"),p.Ec(1,"You are logged in. "),p.Tb(2,"a",8),p.Ec(3,"Go to dashboard"),p.Sb(),p.Sb())}function I(t,e){if(1&t){const t=p.Ub();p.Tb(0,"form",3),p.bc("ngSubmit",(function(){return p.tc(t),p.fc().login()})),p.Tb(1,"mat-form-field",4),p.Ob(2,"input",5),p.Sb(),p.Tb(3,"mat-form-field",4),p.Ob(4,"input",6),p.Sb(),p.Tb(5,"button",7),p.Ec(6,"Sign in "),p.Sb(),p.Sb()}if(2&t){const t=p.fc();p.kc("formGroup",t.form)}}function T(t,e){1&t&&(p.Tb(0,"p"),p.Ec(1,"You are logged in. "),p.Tb(2,"a",8),p.Ec(3,"Go to dashboard"),p.Sb(),p.Sb())}const k=[{path:"",component:g},{path:"signup",component:(()=>{class t{constructor(t,e,o,r){this.router=t,this.fb=e,this.authService=o,this.alertsService=r,this.auth=new n.d}ngOnInit(){this.form=this.fb.group({email:["",[n.q.required,n.q.email]],password:["",n.q.required]})}signup(){this.authService.register(this.form.value).subscribe(t=>{t.headers.has("x-access-token")?(this.authService.accessToken=t.headers.get("x-access-token"),localStorage.setItem("access-token",this.authService.accessToken),this.router.navigate(["/"]).then(()=>{})):this.alertsService.add("No access token in response")})}}return t.\u0275fac=function(e){return new(e||t)(p.Nb(a.b),p.Nb(n.c),p.Nb(m.a),p.Nb(f.a))},t.\u0275cmp=p.Hb({type:t,selectors:[["app-signup"]],decls:7,vars:2,consts:[[1,"mat-h1"],["fxLayout","column","novalidate","",3,"formGroup","ngSubmit",4,"ngIf"],[4,"ngIf"],["fxLayout","column","novalidate","",3,"formGroup","ngSubmit"],[1,"example-full-width","form-group"],["formControlName","email","id","email","matInput","","name","email","placeholder","Email","type","email"],["formControlName","password","id","password","matInput","","name","password","placeholder","Password","type","password"],["color","accent","mat-raised-button","","type","submit"],["routerLink","/"]],template:function(t,e){1&t&&(p.Tb(0,"mat-card"),p.Tb(1,"mat-card-header"),p.Tb(2,"h1",0),p.Ec(3,"Signup"),p.Sb(),p.Sb(),p.Tb(4,"mat-card-content"),p.Cc(5,v,7,1,"form",1),p.Cc(6,w,4,0,"p",2),p.Sb(),p.Sb()),2&t&&(p.Bb(5),p.kc("ngIf",!e.authService.loggedIn()),p.Bb(1),p.kc("ngIf",e.authService.loggedIn()))},directives:[b.a,b.c,b.b,r.m,n.r,n.m,S.d,n.g,u.b,n.b,c.b,n.l,n.e,s.b,a.e],styles:[""]}),t})()},{path:"login",component:(()=>{class t{constructor(t,e,o,r){this.router=t,this.fb=e,this.authService=o,this.alertsService=r,this.auth=new n.d}ngOnInit(){this.form=this.fb.group({email:["",[n.q.required,n.q.email]],password:["",n.q.required]})}login(){this.authService.login(this.form.value).subscribe(t=>{null!=t.access_token?(this.authService.accessToken=t.access_token,localStorage.setItem("access-token",this.authService.accessToken),this.router.navigate(["/"]).then(()=>{})):this.alertsService.add("No access token; try logging in again")})}}return t.\u0275fac=function(e){return new(e||t)(p.Nb(a.b),p.Nb(n.c),p.Nb(m.a),p.Nb(f.a))},t.\u0275cmp=p.Hb({type:t,selectors:[["app-login"]],decls:7,vars:2,consts:[[1,"mat-h1"],["novalidate","",3,"formGroup","ngSubmit",4,"ngIf"],[4,"ngIf"],["novalidate","",3,"formGroup","ngSubmit"],[1,"example-full-width","form-group"],["formControlName","email","id","email","matInput","","name","email","placeholder","Email","type","email"],["formControlName","password","id","password","matInput","","name","password","placeholder","Password","type","password"],["color","accent","mat-raised-button","","type","submit"],["routerLink","/"]],template:function(t,e){1&t&&(p.Tb(0,"mat-card"),p.Tb(1,"mat-card-header"),p.Tb(2,"h1",0),p.Ec(3,"Login"),p.Sb(),p.Sb(),p.Tb(4,"mat-card-content"),p.Cc(5,I,7,1,"form",1),p.Cc(6,T,4,0,"p",2),p.Sb(),p.Sb()),2&t&&(p.Bb(5),p.kc("ngIf",!e.authService.loggedIn()),p.Bb(1),p.kc("ngIf",e.authService.loggedIn()))},directives:[b.a,b.c,b.b,r.m,n.r,n.m,n.g,u.b,n.b,c.b,n.l,n.e,s.b,a.e],styles:[""]}),t})()},{path:"logout",component:(()=>{class t{constructor(t){this.authService=t}ngOnInit(){this.authService.logout()}}return t.\u0275fac=function(e){return new(e||t)(p.Nb(m.a))},t.\u0275cmp=p.Hb({type:t,selectors:[["app-logout"]],decls:0,vars:0,template:function(t,e){},encapsulation:2}),t})()}];let y=(()=>{class t{}return t.\u0275mod=p.Lb({type:t}),t.\u0275inj=p.Kb({factory:function(e){return new(e||t)},providers:[m.a],imports:[[r.c,a.f,a.f.forChild(k),n.h,n.o,i.a,c.c,b.d,u.d,s.c]]}),t})()}}]);